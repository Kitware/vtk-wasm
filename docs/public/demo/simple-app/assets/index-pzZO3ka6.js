(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function o(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(t){if(t.ep)return;t.ep=!0;const s=o(t);fetch(t.href,s)}})();const I=[],W={};function k(){let e,n;return{promise:new Promise((o,r)=>{e=o,n=r}),resolve:e,reject:n}}function V(e){return e!=null&&e.Id?e:JSON.parse(e)}function T(e){return e!=null&&e.Id?JSON.stringify(e):e}function D(e,n){return e.rendering===n.rendering&&e.exec===n.exec}function M(e){return(e==null?void 0:e.rendering)==="webgpu"?(console.log("WASM use WebGPU"),{preRun:[function(n){n.ENV.VTK_GRAPHICS_BACKEND="WEBGPU"}]}):(console.log("WASM use WebGL2"),{})}function $(e){return W[e]||(W[e]=new Promise(function(n,o){if(I.indexOf(e)===-1){I.push(e);var r=document.createElement("script");r.type="module",r.src=e,r.onload=n,r.onerror=o,document.body.appendChild(r)}else n(!1)})),W[e]}class L{constructor(){this.loaded=!1,this.loadingPending=null,this.wasm=null,this.config={},this.runtimes=[]}async load(n,o={rendering:"webgl",exec:"sync"}){var r,t;if(this.config=o,!this.loaded)if(this.loadingPending)await this.loadingPending;else{const{promise:s,resolve:l}=k();if(this.loadingPending=s,((r=this.config)==null?void 0:r.rendering)==="webgpu"&&(this.config.exec="async"),!window.createVTKWASM){let d=null;document.querySelectorAll("script").forEach(u=>{if(u.src.includes("vtkWebAssemblyInterface")){const{promise:S,resolve:i}=k();u.onload=i,d=S}}),d&&await d}if(!window.createVTKWASM){let d=null,u=null;if(d=`${n}/vtkWebAssemblyInterface${((t=this.config)==null?void 0:t.exec)==="async"?"Async":""}.mjs`,(await fetch(d)).ok&&(u=d),u||(d=`${n}/vtkWasmSceneManager.mjs`,(await fetch(d)).ok&&(u=d)),!u)throw new Error(`Could not fetch wasm bundle from ${n}`);console.log("WASM use",u),await $(u)}window.createVTKWASM&&(this.wasm=await window.createVTKWASM(M(this.config))),this.loaded=!0,l()}}async createRemoteSession(n){var o;if(this.wasm)if((o=this.wasm)!=null&&o.isAsync&&this.wasm.isAsync()){if(!n||D(this.config,n))return console.log("(Main runtime in async)"),new this.wasm.vtkRemoteSession;{console.log("(New in async)");const t=await window.createVTKWASM(M(n||this.config));return new t.vtkRemoteSession}}else{console.log("(New in sync)");const t=await window.createVTKWASM(M(n||this.config));return new t.vtkRemoteSession}const r=await window.createVTKWasmSceneManager();return r.initialize(),r}createStandaloneSession(){if(!this.wasm)throw new Error("Current WASM version does not support standalone mode");return new this.wasm.vtkStandaloneSession}createStateDecorator(){return this.wasm?V:T}}function C(e){return`${e.charAt(0).toLowerCase()}${e.slice(1)}`}function R(e){return`${e.charAt(0).toUpperCase()}${e.slice(1)}`}function E(e){const n={};return Object.entries(e).forEach(([o,r])=>{n[R(o)]=r}),n}function N(e){const n={};return Object.entries(e).forEach(([o,r])=>{n[C(o)]=r}),n}function J(e,n,o){if(!e.get)return{};const r=e.get(o),t={};return Object.keys(r).forEach(s=>{t[C(s)]=()=>n.decorateResult(e.get(o)[s])}),t}function G(e,n,o){if(!e.get)return{};const r=e.get(o),t={};return Object.keys(r).forEach(s=>{t[C(s)]=l=>e.set(o,n.decorateKwargs({[s]:l}))}),t}function P(e,n,o,r,t){if(o.has(t)&&o.get(t).deref())return o.get(t).deref();const s=[];function l(w){return e.set(t,r.decorateKwargs(E(w)))}function d(w,a){const g=e.observe(t,w,a);return s.push(g),g}function u(w){const a=s.indexOf(w);return a!==-1&&s.splice(a,1),e.unObserve(t,w)}function S(){for(;s.length;)u(s.pop())}const i=J(e,r,t),c=G(e,r,t),f={id:t,obj:{Id:t},set:l,observe:d,unObserve:u,unObserveAll:S},h=new Proxy(f,{get(w,a,g){if(a==="then")return g;if(a==="state")return e.get?N(e.get(t)):(e.updateStateFromObject(t),N(e.getState(t)));if(a==="delete"){const y=e.destroy(t);if(y){const v=o.delete(t);n.delete(v)}return y}return i[a]?i[a]():(w[a]||(w[a]=async(...y)=>r.decorateResult(await e.invoke(t,R(a),r.decorateArgs(y)))),w[a])},set(w,a,g){return c[a]&&c[a](g),g}});return o.set(t,new WeakRef(h)),n.set(h,!0),h}function q(e,n,o){function r(i){return n.has(i)}function t(i){const c={};return Object.entries(i).forEach(([f,h])=>{n.has(h)?c[f]=h.obj:c[f]=h}),c}function s(i){return i.map(c=>n.has(c)?c.obj:c)}const l={isVtkObject:r,decorateKwargs:t,decorateArgs:s};function d(i){return i==null?i:i!=null&&i.Id?P(e,n,o,l,i.Id):i}l.decorateResult=d;function u(i){return P(e,n,o,l,i.Id||i)}function S(i,c){const f=e.create(i);return c&&e.set(f,t(E(c))),P(e,n,o,l,f)}return new Proxy({getVtkObject:u},{get(i,c,f){return c==="then"?f:(i[c]||(i[c]=h=>S(c,h)),i[c])}})}async function K(e,n={}){const o=new WeakMap,r=new Map,t=new L;await t.load(e||"loaded-module",n);const s=t.createStandaloneSession();return q(s,o,r)}const{promise:B,resolve:U,reject:F}=k(),j=document.querySelector("#vtk-wasm");if(j){const e=j.dataset.url||".",n=JSON.parse(j.dataset.config||"{}");window.vtkReady=B,K(e,n).then(o=>{window.vtk=o,U(o)})}else F('No script with id="vtk-wasm"');async function x(e,n="#vtk-wasm-window"){function o(a,g){const y=[];for(let p=0;p<g+1;p++)for(let m=0;m<a+1;m++){const A=(m-.5*a)/a,b=(p-.5*g)/g;y.push(A),y.push(b),y.push(2*Math.sqrt(A*A+b*b)*Math.sin(A)*Math.cos(b))}const v=[],O=[];for(let p=0;p<g;p++)for(let m=0;m<a;m++)O.push(v.length),v.push(m+p*(a+1)),v.push(m+p*(a+1)+1),v.push(m+p*(a+1)+a+2),v.push(m+p*(a+1)+a+1);return O.push(v.length),{points:y,offsets:O,connectivity:v}}const r=o(50,50),t=e.vtkPoints(),s=e.vtkCellArray(),l=e.vtkTypeInt32Array(),d=e.vtkTypeInt32Array();await t.data.setArray(new Float32Array(r.points)),await l.setArray(new Int32Array(r.connectivity)),await d.setArray(new Int32Array(r.offsets)),await s.SetData(d,l);const u=e.vtkPolyData();u.set({points:t,polys:s}),console.log("NumberOfPoints:",await u.getNumberOfPoints()),console.log("NumberOfCells:",await u.getNumberOfCells()),console.log("PolyDataBounds:",await u.getBounds());const S=e.vtkPolyDataMapper();await S.SetInputData(u);const i=e.vtkActor({mapper:S});i.Property.edgeVisibility=!0;const c=e.vtkRenderer();await c.addActor(i),await c.resetCamera();const f=e.vtkRenderWindow({canvasSelector:n});await f.addRenderer(c);const h=e.vtkRenderWindowInteractor({canvasSelector:n,renderWindow:f});await h.render(),await h.start();const w=f.observe("StartEvent",()=>{console.log("Camera position",c.activeCamera.position)});setTimeout(()=>{f.unObserve(w),f.unObserveAll(),console.log("Camera state:",c.activeCamera.state)},3e4)}K().then(e=>{x(e,"#app > canvas")});
